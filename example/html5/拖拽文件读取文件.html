<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>拖拽文件</title>

    <style>
        #div1 {

            width: 400px;
            height: 200px;
            background: #cccccc;
            border: 1px solid black;
            margin: 50px auto 0;
            text-align: center;
            line-height: 200px;
        }
    </style>


    <script type="text/javascript">

        window.onload = function () {

            let oDiv = document.getElementById("div1")

            let oimg = document.getElementById('img1')

            oDiv.addEventListener('dragenter', function () {
                oDiv.innerHTML = '释放鼠标'
            }, false)

            oDiv.addEventListener('dragleave', function () {
                oDiv.innerHTML = '将文件拖拽至此区域'
            }, false)

            oDiv.addEventListener('dragover', function (ev) {
                ev.preventDefault();

                console.log('拖住文件悬停在区域中')
            }, false)

            oDiv.addEventListener('drop', function (ev) {
                
                ev.preventDefault();
                
                //数组
                let ofiles = ev.dataTransfer.files;

                let ofile = ofiles[0];
        
                //读取文件

                let reader = new FileReader();


                reader.onload = function(){
                    alert('读取成功')
                    alert(reader.result)
                }

                reader.onerror = function(){
                    alert('读取失败')
                }
                
                //读取文本文件   文本
                //reader.readAsText(ofile);
                
                
                //读取图片,转成base64  图片
                //reader.readAsDataURL(ofile)
                
                //读取图片,转到数组缓冲区,原始二进制数据   文本
                //reader.readAsArrayBuffer(ofile)

                //读取图片,转到二进制字符串,不是原始二进制数据,更利于传输  文本形式
                //reader.readAsBinaryString(ofile)


            }, false);
        }

    </script>
</head>

<body>

    <div id="div1">将文件拖拽至此区域</div>
    <img src="" alt="" id='img1'>
</body>

</html>
